
nanSag-japgyr-xorru5
chatalyze.help@gmail.com

пароль приложения для устройства
pnfhesmchfrqepii

обязательно поместить все функции в абстарцию и реализовывать их через имплементацию

/////////////////////
websocket
1






/////////////////////////


что происходит по лакнеру


//
сделать проверку токенов на срочность
при перемещении по экранам и отправке сообщений

// как будет работать если забыл пароль
КЛИЕНТ клиент нажимает кн забыл пароль
его перебрасывает на экран ввода почты
клиент вводит почту нажимает кн получить времнный код

СЕРВЕР
сервер получив почту по запросу forgot_password
проверяет почту и если
ее нет, то отправляет что почта не существует
она есть то генерить времнный код со сроком


после его перебрасывает на экран ввода кода и счетчик 2 мин на экране






///////////////////////////////////
по версии Германа
registration
1 клиент шлет на сервер email и password
2 сервер сохраняет в таблицу users -> email, password(hash) + salt
а salt храню на сервере энвы



signin
1 клиент шлел на сервер email и password
2 сервер проверяет email и password в бд
сначала проверить по email потом пароль
3 сервер генерит accessToken и refreshToken
в accessToken зашить id user из бд
accessToken это длинная строка(срок действия 20 мин) а refreshToken которая uuid (срок действия 30 дней)


//3.1 сервер сохраняет accessToken в бд


4 сервер отправляет клиенту accessToken и refreshToken
5 клиент сохраняет в сторе accessToken и refreshToken???????
6 для того чтобы клиент мог проверять валидность accessToken и refreshToken?????
он должен отправить серверу accessToken и refreshToken????? и еще что-то?????
7 сервер делает проверку по email протух accessToken и refreshToken?????


///////////////////////////

сервер создал пару и сохранил только акцес

клиент сохранил у себя пару
и при запросах шлет пару серверу
на сервере проверяю
если акцес сдох то я использую рефреш и создаю новую пару и отпраляю киенту
если сдохли оба то я клиента перевожу на экран входа
если никто не сдох то ничего не делаю
/////////////////////////////

jwt guard token kotlin
если нашел то сервер генерит новую пару и отправляет клиенту



что касается создания accessToken и refreshToken
в payload включить то по чему я буду его искать в бд
после удачного поиска его ????? в бд я генерю новую пару



так же на клиенте когда он получает от сервера ответ истекшего токена
в retrofit сработает перехватчик и сразу сделает запрос на обновление токена и получит его себе



не плохое видео
https://www.youtube.com/watch?v=KqcEVUI7-s0



realm_value = "realm_value"

jwt {
  issuer = "http://0.0.0.0:8080"
  audience = "http://0.0.0.0:8080"
  expiresIn = "365d"
  secret = "your_secret_key"
}

